class Zoom4 extends HTMLElement{constructor(){super(),this.scale=1}connectedCallback(){if(this.hasAttribute("option")){switch(this.getAttribute("option")){case"zoom":this.zoom(),"has-button"==this.getAttribute("reset-button")&&this.resetZoom();break;case"move":this.move(),"has-button"==this.getAttribute("reset-button")&&this.resetMove()}}else console.error('zoom-element 記得加上 option屬性 例如option="zoom"')}disconnectedCallback(){console.log("removed")}zoom(){const e=document.createElement("div");this.appendChild(e),e.className="scale-element",e.scale=1,e.addEventListener("wheel",(function(e){e.preventDefault(),this.scale+=-.01*e.deltaY,this.scale=Math.min(Math.max(.125,this.scale),10),this.style.transform=`scale(${this.scale})`}))}resetZoom(){const e=document.createElement("div");this.appendChild(e),e.className="zoom-reset";const t=this.querySelector(".scale-element");e.addEventListener("click",(function(){t.scale=1,t.style.transform="scale(1)"}))}move(){const e=document.createElement("div");this.appendChild(e),e.className="move-element";const t="ontouchstart"in document.documentElement?"touchstart":"mousedown",o="ontouchend"in document.documentElement?"touchend":"mouseup",s="ontouchmove"in document.documentElement?"touchmove":"mousemove",n=this.querySelector(".move-element"),i=this;let c,l,a,r,h,m=!1;this.hasAttribute("boundary")&&"inside"==this.getAttribute("boundary")&&(m=!0),"hide"==this.getAttribute("boundary")&&(this.style.overflow="hidden");const u=this.querySelector(".left"),d=this.querySelector(".top");u.innerHTML=`Left ${n.offsetLeft} px`,d.innerHTML=`Top ${n.offsetTop} px`,this.addEventListener(t,(function(e){e.preventDefault(),c=!0,"touchstart"==t?(l=e.originalEvent.targetTouches[0].pageX-n.offsetLeft,a=e.originalEvent.targetTouches[0].pageY-n.offsetTop):(l=e.pageX-n.offsetLeft,a=e.pageY-n.offsetTop),n.addEventListener(s,(function(e){c&&("touchmove"==s?(r=e.originalEvent.targetTouches[0].pageX-l,h=e.originalEvent.targetTouches[0].pageY-a):(r=e.pageX-l,h=e.pageY-a)),m&&(r>i.offsetWidth-n.offsetWidth?r=i.offsetWidth-n.offsetWidth:r<0&&(r=0),h>i.offsetHeight-n.offsetHeight?h=i.offsetHeight-n.offsetHeight:h<0&&(h=0)),n.style.left=`${r}px`,n.style.top=`${h}px`,u.innerHTML=`${n.style.left}`,d.innerHTML=`${n.style.top}`}))})),this.addEventListener("mouseleave",(function(){console.log("mouseleave"),c=!1})),this.addEventListener(o,(function(){console.log("mouseup"),c=!1}))}resetMove(){const e=document.createElement("div");this.appendChild(e),e.className="zoom-reset";const t=this.querySelector(".move-element"),o=t.offsetLeft,s=t.offsetTop;e.addEventListener("click",(function(){t.style.left=`${o}px`,t.style.top=`${s}px`}))}}customElements.define("zoom-element",Zoom4);
//# sourceMappingURL=zoom4-dist.js.map